webpackJsonp([16],{Gud6:function(e,t){},LRHR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("ZTGO"),a=r.n(s);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);var c=r("ax/s");var o=function(e){r("Gud6")},i=r("VU/8")(a.a,c.a,!1,o,"data-v-da5b3724",null);t.default=i.exports},ZTGO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(r("Xxa5")),a=n(r("exGp"));function n(e){return e&&e.__esModule?e:{default:e}}t.default={components:{},data:function(){return{quantity:"",price:"",hl:0,hf:0,usdt:0,hlPrice:0,purchaseQuantity:"HL",rewardPointsPopup:!1,superiorsAddr:"",recommerMapping:"",membersInfo:{},coreBalance:0}},activated:function(){var e=this;return(0,a.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getBalance(),e.refereeToRecommender();case 2:case"end":return t.stop()}},t,e)}))()},computed:{increase:function(){return(Number(this.hlPrice)-Number(this.fromWei(this.membersInfo.price)))/Number(this.fromWei(this.membersInfo.price))*100}},methods:{getMembers:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.hlContract().balanceOf(e.core.coreAddress).call();case 2:r=t.sent,e.coreBalance=e.fromWei(r);case 4:case"end":return t.stop()}},t,e)}))()},authorization:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r,a,n,c;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGasPrice();case 2:return r=t.sent,t.next=5,e.core.usdtContract().approve(e.core.coreAddress,e.toWei(1e4)).estimateGas();case 5:return a=t.sent,t.next=8,e.core.usdtContract().approve(e.core.coreAddress,e.toWei(1e4)).send({from:e.$store.state.userAddress,gas:a+5e3,gasPrice:r});case 8:return t.next=10,e.core.hfContract().approve(e.core.coreAddress,e.toWei(1e4)).estimateGas();case 10:return n=t.sent,t.next=13,e.core.hfContract().approve(e.core.coreAddress,e.toWei(1e4)).send({from:e.$store.state.userAddress,gas:n+5e3,gasPrice:r});case 13:return t.next=15,e.core.hlContract().approve(e.core.coreAddress,e.toWei(1e4)).estimateGas();case 15:return c=t.sent,t.next=18,e.core.hlContract().approve(e.core.coreAddress,e.toWei(1e4)).send({from:e.$store.state.userAddress,gas:c+5e3,gasPrice:r});case 18:e.$toast("授权成功");case 19:case"end":return t.stop()}},t,e)}))()},refereeToRecommender:function(){var e=this;return(0,a.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.coreContract()._recommerMapping(e.userAddress).call();case 2:e.recommerMapping=t.sent,e.recommerMapping==e.zeroAddress&&(e.rewardPointsPopup=!0);case 4:case"end":return t.stop()}},t,e)}))()},getPrice:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.coreContract().getPrice().call();case 2:r=t.sent,e.hlPrice=Number(e.fromWei(r));case 4:case"end":return t.stop()}},t,e)}))()},getBalance:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r,a,n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getPrice(),t.next=3,e.core.hlContract().balanceOf(e.userAddress).call();case 3:return r=t.sent,t.next=6,e.core.hfContract().balanceOf(e.userAddress).call();case 6:return a=t.sent,t.next=9,e.core.usdtContract().balanceOf(e.userAddress).call();case 9:n=t.sent,e.hl=e.fromWei(r),e.hf=e.fromWei(a),e.usdt=e.fromWei(n);case 13:case"end":return t.stop()}},t,e)}))()},buyHl:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r,a,n,c,o;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.recommerMapping!=e.zeroAddress){t.next=3;break}return e.rewardPointsPopup=!0,t.abrupt("return");case 3:if(e.quantity){t.next=6;break}return e.$toast(e.$t("index.text19")),t.abrupt("return");case 6:if(!(Number(e.usdt)<Number(e.quantity))){t.next=9;break}return e.$toast(e.$t("index.text164")),t.abrupt("return");case 9:if(!(Number(e.quantity)>100)){t.next=12;break}return e.$toast(e.$t("index.text169")),t.abrupt("return");case 12:return t.next=14,e.core.coreContract().dailyPurchases(e.userAddress).call();case 14:return t.sent,e.$toast.loading({duration:0,forbidClick:!0,message:e.$t("index.text21"),className:"loading"}),t.next=18,e.getGasPrice();case 18:return r=t.sent,t.next=21,e.core.usdtContract().allowance(e.userAddress,e.core.coreAddress).call();case 21:if(a=t.sent,n=Number(e.fromWei(a)),c=Number(e.quantity),t.prev=24,!(n<c)){t.next=28;break}return t.next=28,e.publicApprove(e.core.coreAddress,e.usdt);case 28:return t.next=30,e.core.coreContract().buyHL(e.userAddress,e.toWei(e.quantity)).estimateGas();case 30:return o=t.sent,t.next=33,e.core.coreContract().buyHL(e.userAddress,e.toWei(e.quantity)).send({from:e.userAddress,gas:o+1e4,gasPrice:r});case 33:t.sent,e.$toast.clear(),e.getBalance(),e.$toast(e.$t("index.text22")),t.next=44;break;case 39:t.prev=39,t.t0=t.catch(24),e.setErrDialog(e.$t("index.text178")),e.$toast.clear(),e.getBalance();case 44:case"end":return t.stop()}},t,e,[[24,39]])}))()},bind:function(){var e=this;return(0,a.default)(s.default.mark(function t(){var r,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.superiorsAddr){t.next=3;break}return e.$toast(e.$t("index.text156")),t.abrupt("return");case 3:if(e.isAddress(e.superiorsAddr)){t.next=6;break}return e.$toast(e.$t("index.text71")),t.abrupt("return");case 6:if(e.superiorsAddr.toLowerCase()!=e.userAddress.toLowerCase()){t.next=9;break}return e.$toast(e.$t("index.text159")),t.abrupt("return");case 9:return e.$toast.loading({duration:0,forbidClick:!0,message:e.$t("index.text21"),className:"loading"}),t.prev=10,t.next=13,e.getGasPrice();case 13:return r=t.sent,t.next=16,e.core.coreContract().addRelationEx(e.userAddress,e.superiorsAddr).estimateGas();case 16:return a=t.sent,t.next=19,e.core.coreContract().addRelationEx(e.userAddress,e.superiorsAddr).send({from:e.userAddress,gas:a+1e4,gasPrice:r});case 19:e.referrals=t.sent,e.$toast(e.$t("index.text158")),e.refereeToRecommender(),e.rewardPointsPopup=!1,t.next=29;break;case 25:t.prev=25,t.t0=t.catch(10),console.log(t.t0),e.$toast.clear();case 29:case"end":return t.stop()}},t,e,[[10,25]])}))()}}}},"ax/s":function(e,t,r){"use strict";var s={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"getPointsBox"},[s("div",{staticClass:"header"},[s("div",{staticClass:"orderDetailsHeader"},[s("div",{staticClass:"headerContent"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:function(t){return e.$router.go(-1)}}}),e._v(" "),s("span",[e._v(e._s(e.$t("index.text1")))])],1)]),e._v(" "),s("div",{staticClass:"slot"})]),e._v(" "),s("div",{staticClass:"orderDetailsMain"},[s("div",{staticClass:"recommendedInfo",staticStyle:{background:"#fcefd3"}},[s("div",{staticClass:"recommendedInfoTitle jcsb"},[s("span",{staticStyle:{color:"#333"}},[e._v(" （USDT）"+e._s(e.$t("index.text12"))+" ")]),e._v(" "),s("span",{staticStyle:{color:"#333"}},[e._v(e._s(e.usdt))])]),e._v(" "),s("div",{staticClass:"recommendedInfoTitle jcsb mt2r"},[s("span",{staticStyle:{color:"#333"}},[e._v(" （HF）"+e._s(e.$t("index.text12"))+" ")]),e._v(" "),s("span",{staticStyle:{color:"#333"}},[e._v(" "+e._s(e.hf))])])]),e._v(" "),s("div",{staticClass:"buyBox"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.quantity,expression:"quantity",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.$t("index.text13")},domProps:{value:e.quantity},on:{input:function(t){t.target.composing||(e.quantity=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("div",{staticClass:"price"},[e._v(e._s(e.$t("index.text170"))+e._s(e.hlPrice))]),e._v(" "),s("div",{staticClass:"price"},[e._v("\n        "+e._s(e.$t("index.text181"))+e._s(e.fromWei(e.membersInfo.price||0))+"\n      ")]),e._v(" "),s("div",{staticClass:"buyBtn jcc",on:{click:e.buyHl}},[e._v(e._s(e.$t("index.text10")))])]),e._v(" "),s("div",{staticClass:"tips"},[e._v("\n      "+e._s(e.$t("index.text14"))),s("span",{staticStyle:{color:"#d12c21"}},[e._v(" "+e._s(e.$t("index.text15")))]),e._v(" "),s("span",{staticStyle:{color:"#f5c96d"}},[e._v(" "+e._s(e.$t("index.text16")))]),e._v("\n      "+e._s(e.$t("index.text17"))+"\n    ")]),e._v(" "),s("div",{staticClass:"jcc",staticStyle:{"margin-top":"2rem"}},[s("span",{staticStyle:{"text-decoration":"underline","font-weight":"bold"},on:{click:function(t){return e.$router.push("/purchaseRecords")}}},[e._v("\n        "+e._s(e.$t("index.text18")))])]),e._v(" "),s("div",{staticClass:"recommendedInfo mt2r"},[s("div",{staticClass:"recommendedInfoTitle jcsb"},[s("span",[e._v(" "+e._s(e.$t("index.text179"))+" ")]),e._v(" "),s("span",[e._v(e._s(e.membersInfo.count||0))])]),e._v(" "),s("div",{staticClass:"recommendedInfoTitle jcsb mt2r"},[s("span",[e._v(" "+e._s(e.$t("index.text180"))+" ")]),e._v(" "),s("span",[e._v(" "+e._s(e.coreBalance))])])])]),e._v(" "),s("van-popup",{staticClass:"rewardPointsPopup",model:{value:e.rewardPointsPopup,callback:function(t){e.rewardPointsPopup=t},expression:"rewardPointsPopup"}},[s("div",{staticClass:"content"},[s("img",{staticClass:"close",attrs:{src:r("q6r7"),alt:""},on:{click:function(t){e.rewardPointsPopup=!1}}}),e._v(" "),s("div",{staticClass:"title"},[e._v(e._s(e.$t("index.text155")))]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.superiorsAddr,expression:"superiorsAddr",modifiers:{trim:!0}}],staticClass:"textarea",attrs:{type:"textarea",placeholder:e.$t("index.text156"),rows:"7"},domProps:{value:e.superiorsAddr},on:{input:function(t){t.target.composing||(e.superiorsAddr=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("div",{staticClass:"confirm mt2r jcc",on:{click:e.bind}},[e._v("\n        "+e._s(e.$t("index.text10"))+"\n      ")]),e._v(" "),s("div",{staticClass:"tips"},[e._v(e._s(e.$t("index.text157")))])])])],1)},staticRenderFns:[]};t.a=s}});
//# sourceMappingURL=16.0e3422da3fdb60e48aba.js.map